# 智能学习平台功能清单（含页面与增删改查）

> 线上 Demo 入口（全部页面共用）：https://oss-sz.suiguangming.com/ziliao/demo/index.html  
> 下面每一项都写明了“用户在页面上能看到什么 + 能做哪些新增/修改/删除/查询操作 + 数据落在哪”。  

## 1. 学生侧场景

| 功能区 | 页面/模块（Demo 页面中左侧菜单） | 操作级别（增/删/改/查） | 说明 |
| --- | --- | --- | --- |
| 目标设定与访谈 | 学生流程 → “评估目标设定” | **新增**：学生输入/选择目标后生成一条目标记录；**修改**：重新进入页面可编辑原目标；**查询**：右侧对话区可回看历史消息；**删除**：学生可清空草稿，系统保留最后一次提交 | 需要在后端保存 `student_goal` 表，字段含目标类型、自定义描述、时间戳。 |
| 互动评估 / 学习风格识别 | 学生流程 → “目标选择与互动评估” (`/goal-selection`) | **新增**：发起数字老师访谈、完成视频/小游戏/测验卡片；**修改**：重新选择难度与学习者类型；**查询**：回看对话与评估结论；**完成**：带上下文跳转 Dashboard/路径 | 记录 `assessment_sessions`, `assessment_widgets`, `learning_style_profile`，对话落 `dialogue_messages`。 |
| 思维步骤评估 | 学生流程 → “思维步骤构建” | **新增**：学生新增步骤卡片；**修改**：拖拽排序或编辑内容；**删除**：点击删除按钮；**查询**：列表展示全部步骤 | 前端以 JSON 结构提交，落库 `thinking_steps`，包含顺序号和文本。 |
| 多维画像展示 | 学生流程 → “能力雷达/知识星云/态度评估/总结” | **查询**：读取评估结果；**修改**：当系统重算后自动刷新；无新增/删除入口 | 由评估服务计算，前端仅展示；历史版本需可切换。 |
| 学习路径时间线 | 学生空间 → “个性化学习路径” | **查询**：查看所有节点；**修改**：标记节点完成、反馈难度；**删除**：学生不能删节点，只有老师/系统；**新增**：当引擎推新任务时自动追加 | 交互动作写回 `student_path_progress`。 |
| 我的路径 / 轨迹 / ~~错题本（搁置）~~ | 学生空间 → “我的学习路径”“学习轨迹”“错题本” | **新增**：新学习记录自动写入；**修改**：学生可更新复习状态、笔记；**删除**：允许删除个人备注但不删系统记录；**查询**：按时间/知识点筛选；**暂缓**：错题本模块暂停，相关新增/编辑下线 | 涉及 `learning_logs`、`error_questions` 两张表，支持条件查询（错题本写入暂缓）。 |
| AI 学习助手（智能体广场） | 学生空间 → “AI学习助手” (`/student/agents`) | **查询/筛选**：按专业/热度/评分搜索智能体；**新增**：进入智能体对话；**评价**：评分、留言点赞；**统计**：记录个人使用；**跳转**：查看智能体详情 | 表 `agent_profiles`, `agent_usage_records`, `agent_comments`, `agent_ratings`, `agent_statistics`。 |
| AI 学习对话 | 学习对话 → 任意知识节点 | **新增**：发送消息、新建练习/测评结果；**修改**：学生可补充掌握度；**删除**：支持清空本节点历史；**查询**：滚动查看对话与卡片 | 对话存 `dialogue_messages`，练习结果入 `practice_records`。 |
| 学习报告 | 学生空间 → “学习报告” | **查询**：按时间、知识点查看报告；**新增**：生成新的报告版本；**修改**：学生可补充自评；**删除**：仅能隐藏某版本 | 报告结构化存 `learning_reports`，提供导出 PDF/JSON。 |
| 课程知识目录 | 课程内页 → “知识点目录” (`/course/:courseId/knowledge-catalog`) | **查询**：按章节/掌握度过滤知识点；**新增**：可跳转到知识点学习对话；**修改**：学生切换课程/过滤条件；无删除 | 读取 `knowledge_catalog_bindings`、`knowledge_tree` 和学生掌握度 `knowledge_mastery`，用于个性化推荐。 |
| 课程作业上传与 AI 识别 | 课程内页 → “作业” (`/course/:courseId/homework`) | **新增**：题目/整卷上传图片；**修改**：替换/补传；**查询**：查看识别代码与进度；**提交**：整套作业提交 | 落库 `homework_submissions`、`homework_questions`、`ocr_results`，触发 AI 识别/分题服务。 |
| 课程资料库 | 课程内页 → “学习资料” (`/course/:courseId/materials`) | **查询**：按知识点/类型/关键词筛选；**新增**：学生收藏/下载记录；无删除 | 资源元数据 `teacher_resources` + 关联表 `knowledge_resource_bindings`，记录学生下载/预览日志。 |

## 2. 教师侧场景

| 功能区 | 页面/模块（Demo 页面中“教师系统”） | 操作级别 | 说明 |
| --- | --- | --- | --- |
| 教师工作台 | “教师工作台” | **查询**：课程/学生卡片；**修改**：更新公告、批阅待办；无新增/删除 | 展示统计，操作写回 `teacher_dashboard_actions`。 |
| 班型难度配置 | “班型难度设置” | **新增**：创建班型模板；**修改**：编辑分层策略；**删除**：下架模板；**查询**：列表/历史版本 | 数据表 `class_profiles`。 |
| 学习路径管理 | “学习路径管理” | **新增**：创建路径；**修改**：改描述、复制；**删除**：逻辑删除路径；**查询**：分页+筛选 | 表 `learning_paths`。 |
| 学习路径编辑 | “学习路径管理 → 编辑” | **新增**：勾选知识点加入路径、添加资源；**修改**：拖拽顺序、录入描述、接受/拒绝 AI 建议；**删除**：移除知识点或资源；**查询**：树状搜索知识点 | 需要 `path_nodes`、`path_ai_suggestions` 两张表。 |
| ~~AI 分组推荐（搁置）~~ | “AI 智能学习小组” | **暂缓**：生成/调整/保存分组方案暂停交付，恢复后沿用原分组策略与数据结构 | 表 `group_plans`，字段含策略、成员、老师备注。 |
| 智能体运营中心 | “AI 智能体” (`/teacher/agents`, `/teacher/agents/manage`, `/teacher/agent/:id`) | **新增**：创建/复制智能体；**修改**：编辑画像/能力、上下架；**删除**：逻辑删除智能体；**查询/监控**：使用/评分/评论趋势；**运营**：评论批量审核/置顶推荐；**导出/导入**：大盘导出 Excel，单个智能体支持学生使用明细导入 Excel | 表 `agent_profiles`, `agent_statistics`, `agent_comments`, `agent_usage_records`, `agent_templates`, `agent_usage_import_jobs`。 |
| 班级路径概览/学生详情 | “班级路径”“学生路径详情” | **查询**：按班级/学生查看路径进度和日志；**修改**：老师可调整里程碑、添加备注；**删除**：仅能删除备注；**新增**：新建提醒或任务 | 表 `class_progress`, `teacher_notes`。 |
| 知识点评测配置 | “知识点评测配置” | **新增**：创建不同难度试卷、关联资料、AI 出题；**修改**：编辑题目、调整时间；**删除**：移除题目或整套配置；**查询**：按知识点/难度筛选 | 表 `assessment_configs`, `assessment_questions`。 |
| ~~教案管理中心（搁置）~~ | “AI教案 → 教案列表” (`/teacher/lesson-plans`) | **暂缓**：列表筛选/创建/修改/删除暂停交付，方案保留 | 表 `lesson_plan_storage`（LocalStorage/云端），`lessonPlanMetadata` |
| ~~教案创建向导（搁置）~~ | “AI教案 → 新建教案” (`/teacher/lesson-plans/create`) | **暂缓**：四种创建方式（标题/文本/章节/大纲）暂缓上线，等待需求恢复 | 依赖 `lesson_plan_config`, `chapter_library`, `aiParser`, `generateLessonPlan` |
| ~~教案编辑器（搁置）~~ | “AI教案 → 编辑” (`/teacher/lesson-plans/edit/:id`) | **暂缓**：在线编辑/版本对比/导出暂停交付，保留技术方案 | 数据落在 `lessonPlanStorage`, 导出走 `documentExporter` |
| ~~模板管理（搁置）~~ | “AI教案 → 模板库” (`/teacher/templates`) | **暂缓**：模板保存/编辑/分享暂缓，恢复后按原接口实现 | `templateManager`（Local/云），字段含 `templateId`, `scope`, `usageCount` |
| 教师资源管理器 | “教学资源库” (`/teacher/resources`) | **新增**：上传文件、录入题目；**修改**：编辑资源信息、打标签；**删除**：移除资源；**查询**：按类型/标签/搜索过滤；**预览/分享**：在线预览、复制链接；**暂缓**：~~添加H5链接~~ | `teacher_resources`（待接入），本地 mock + 上传 API |
| 教学预览模式 | “资源预览/课堂播放” (`/teacher/teaching-preview`) | **查询**：翻页、查看AI推荐资源；**修改**：调整PPT大纲、标注重点；**导出**：生成课堂PPT、下载资源；**刷新**：重新匹配 AI 资源 | 临时状态存内存，导出调用 `documentExporter` |
| 学生评价系统 | “学生评价” (`/teacher/student-evaluation`) | **新增**：对学生记录表扬/加分；**修改**：调整评价内容、加分数；**查询**：搜索学生、查看统计；**删除**：撤销单条评价 | `studentEvaluationData`（LocalStorage），含 `students`, `evaluations` |
| 学生评价历史 | “学生评价 → 详情” (`/teacher/student-evaluation/:id`) | **查询**：某学生全量评价记录、成长曲线；**新增**：补录历史评价；**导出**：生成报告 | 同上，支持 `evaluationHistory` 结构 |
| 学生管理 | “教师系统 → 学生管理” (`/teacher/students`) | **新增**：导入/新增学生；**修改**：编辑个人信息、班级、联系方式；**删除**：逻辑删除/退学；**查询**：搜索/筛选 | 表 `students`, `enrollments`, `student_contacts`，支持批量导入导出 |
| 班级管理 | “教师系统 → 班级管理” (`/teacher/classes`) | **新增**：创建班级、设置班主任、配置学生名单；**修改**：调整成员/描述；**删除**：逻辑删除班级；**查询**：按年级/班主任筛选 | 表 `classes`, `class_members`, `class_profiles`，需与路径/评价/分组联动 |

## 3. 知识库与自动化

| 功能 | 页面或入口 | 操作级别 | 说明 |
| --- | --- | --- | --- |
| 知识树管理 | Demo 中“知识点树（教师路径编辑器左侧）” | **查询**：多层目录；**新增**：导入/手工添加节点；**修改**：改名称、学时、标签；**删除**：逻辑删除节点 | 在后台提供拖拽+批量导入接口，与 `knowledge_tree` 表同步。 |
| 知识点标签 | —（在教师编辑器、AI 分析中显示） | **新增/修改**：在后台表单维护标签、难度、估时；**查询**：在所有页面展示；**删除**：仅管理员可删 | 表 `knowledge_points_meta`。 |
| 资源绑定 | 教师路径编辑器 → “资源推荐” | **新增**：把 PPT/视频/AI 小助手绑定知识点；**修改**：更换资源顺序；**删除**：解绑；**查询**：列表 | 表 `knowledge_resources`。 |
| 自动生成学习路径 | 教师路径编辑器 → “AI 推荐顺序” | **新增**：AI 产出新顺序并可保存；**修改**：老师手动调整；**删除**：废弃某个 AI 建议；**查询**：查看历史建议 | 表 `path_ai_versions`。 |
| 自动出题 | 知识点评测配置 → “AI 一键生成” | **新增**：一键生成多题；**修改**：老师编辑题干/答案；**删除**：删题；**查询**：题库筛选 | 表 `ai_generated_questions`。 |
| 自动回写弱项 | 学生~~错题本~~、学习报告（错题本搁置，回写保留在报告/画像） | **新增**：每次练习完成后写入知识点得分；**修改**：老师可手动纠偏；**删除**：仅管理员恢复；**查询**：在报告/知识画像中读出 | 表 `knowledge_mastery`。 |
| 数字教师记忆与上下文 | 学习对话 / 资源/题目推荐链路 | **新增**：多轮对话与掌握度状态持久化；**修改**：重放/纠偏上下文；**删除**：学生清空本节点历史；**查询**：跨设备会话恢复 | 表 `dialogue_messages`, `student_state_snapshots`, `context_store` + 索引/向量检索，用于个性化召回 |
| 知识库 AutoIndex | —（后台运维入口 + 定时任务） | **新增**：监控源目录/存储并触发索引；**修改**：重跑单批、调整切片/向量化参数；**删除**：下架或冻结某批索引；**查询**：查看索引状态、失败重试 | 表 `kb_autoindex_tasks`, `kb_index_snapshots` + 向量库（段落/资源级别），提供 webhook/回调 |
| 章节库与教材映射 | AI教案 → 章节创建 | **查询**：学段/学科/教材树；**新增**：导入/维护章节元数据；**修改**：更新知识点映射、推荐参数；**删除**：下架章节 | 数据源 `chapter_library`, `knowledge_catalog_bindings` |
| 课程与模板配置 | AI教案 → lesson_plan_config | **查询**：模块预设、风格参数；**修改**：更新模块开关、预设模板；**新增**：新增课堂模块或语气配置 | `lesson_plan_config`, `LESSON_MODULES`, `MODULE_PRESETS` |

## 4. 数据流与接口（概念性说明）
- **新增类接口**：`POST /goals`, `POST /thinking-steps`, `POST /dialogue/{nodeId}/message`, `POST /paths`, `POST /assessments`.  
- **修改类接口**：`PUT /goals/{id}`, `PATCH /paths/{id}`, `PATCH /path-nodes/{id}`, `PATCH /assessment-question/{id}`。  
- **删除类接口**：`DELETE /path-nodes/{id}`, `DELETE /group-plan/{id}`, `DELETE /assessment-question/{id}`（均为逻辑删除）。  
- **查询类接口**：`GET /students/{id}/profile`, `GET /paths`, `GET /knowledge-tree`, `GET /reports`, `GET /ai-suggestions`.  

## 5. 页面跳转关系（基于 Demo URL）
1. 进入 Demo：`https://oss-sz.suiguangming.com/ziliao/demo/index.html`。  
2. 左侧主菜单分为“学生流程”“学生空间”“学习对话”“教师系统”“知识与AI”几大区。  
3. 常用跳转链：  
   - `评估目标设定 → 思维步骤构建 → 能力雷达 → 学习路径`（学生首访流程）。  
   - `目标选择互动评估（数字老师访谈）→ 能力雷达/总结 → 个性化路径`（学习风格识别流）。  
   - `教师工作台 → 学习路径管理 → 编辑 → 保存 → 分配给班级`。  
   - `知识点评测配置 → AI 生成 → 保存题库 → 学生~~错题本~~/报告`（错题本搁置）。  
   - `教师智能体管理 → 智能体统计 → 学生 AI 学习助手`。  
4. 页面 URL 统一，靠 hash 及内部路由切换，无需额外登录；正式环境可以给每个模块单独路由（例：`/goal-setting`, `/teacher/path`）。  

## 6. 人力与排期
- 前端（学生/教师 UI、教案与资源管理 + 新增智能体/互动评估） ~113 人日（扣除搁置 38 人日）  
- 后端 / 数据服务（教案引擎、知识库、资源、评价、同步管道 + AutoIndex + 上下文服务） ~320 人日（扣除搁置 103 人日，其中知识库 AutoIndex 由 Tony 负责 ~18 人日）  
- AI 能力补强（解析、推荐、生成、评估 + 智能体推荐/画像） ~61 人日（扣除搁置 22 人日）  
- 测试 / 验收 / 上线支持 ~37 人日（扣除搁置 14 人日）  
- **整体约 531 人日**（已扣除搁置项 177 人日），详细拆分见第 10 节（甲方重点关注的后端工作量约 320 人日，不含搁置项）。  
 - 里程碑：  
  1. 第 1-4 周：账号 & 数据底座 + 学生评估首版 + 知识树导入 + AutoIndex 方案/PoC + 上下文/记忆服务雏形。  
  2. 第 5-8 周：教师路径/评测、~~AI 分组（搁置）~~、自动路径&题库、智能体运营中心 + AutoIndex 增量/回调完善 + 课程知识目录/作业/资料联通（搁置项恢复后另行排期）。  
  3. 第 9-12 周：AI 对话进阶、学情报告、学生/班级管理落库、AI 学习助手/互动评估完善、全量测试 + 运维 + AutoIndex 监控/巡检上线。  

### 搁置项（状态：暂停，工时已从总计扣除 177 人日）

| 功能 | 状态 | 预估前端 | 预估后端 | 预估 AI | 预估测试 | 恢复小计 | 备注 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| ~~AI 教案（列表/创建/编辑/模板）~~ | 搁置 | 18 | 50 | 9 | 4 | **81** | 原 G 模块整体暂停 |
| ~~点石规划~~ | 搁置 | 2 | 8 | 0 | 2 | **12** | 需求待澄清，可按规划工具轻量版估算 |
| ~~课中资料推荐资源~~ | 搁置 | 4 | 8 | 4 | 2 | **18** | 课堂播放内的实时资源推荐 |
| ~~AI 分组~~ | 搁置 | 8 | 24 | 6 | 3 | **41** | 原 E 模块整体暂停 |
| ~~错题本~~ | 搁置 | 4 | 10 | 3 | 2 | **19** | 包含错题归档、标签、回写 |
| ~~资料 H5 链接支持~~ | 搁置 | 2 | 3 | 0 | 1 | **6** | 教师资源库内的外链/H5 上传与预览 |

> 若还需要对接现有教务系统或做多校区部署，需在上述操作清单基础上追加接口和安全评估。

---

## 7. 思维导图结构（功能 → 页面 → 操作 → 结果，可直接复制）

- **学生端**（Demo 左侧“学生流程/学生空间/学习对话”）  
  - 目标设定与访谈 `https://oss-sz.suiguangming.com/ziliao/demo/index.html#/student/goal-setting`  
    - 操作：新增/修改目标、查看历史、清空草稿  
    - 结果：形成一条 `student_goal` 记录，数字教师调用  
  - 思维步骤构建 `#/student/ability-steps`  
    - 操作：新增步骤、拖拽、编辑、删除、查看当前题的全部步骤  
    - 结果：生成结构化思维链，用于评估报告  
  - 能力/知识/态度画像 `#/student/profile`  
    - 操作：查看当期/历史画像、切换维度  
    - 结果：学生获得可视化反馈  
  - 学习路径时间线 `#/student/path`  
    - 操作：查看节点、标记完成/困难、跳转资源  
    - 结果：`student_path_progress` 更新，触发下一节点  
  - 学习轨迹 `#/student/history` 与 ~~错题本 `#/student/errors`（搁置）~~  
    - 操作：筛选/查询日志、编辑备注、删除个人标记（系统记录不能删）  
    - 结果：学习日志沉淀、错题定位  
  - AI 学习对话 `#/student/dialogue/:nodeId`  
    - 操作：发送消息、触发资源/练习/测评卡片、补录掌握度、清空历史  
    - 结果：对话存入 `dialogue_messages`，练习写入 `practice_records`  
  - 学习报告 `#/student/report`  
    - 操作：生成新报告、查看历史、补充自评、导出  
    - 结果：`learning_reports` 产生新版本

- **教师端**（Demo 左侧“教师系统”）  
  - 教师工作台 `#/teacher/dashboard`  
    - 操作：查看课程/待办、处理审批、发布公告  
    - 结果：老师掌握班级概况  
  - 班型难度设置 `#/teacher/difficulty`  
    - 操作：新增模板、修改分层、删除模板、查看历史  
    - 结果：`class_profiles` 生效，学生路径引用  
  - 学习路径管理 `#/teacher/path` 与编辑 `#/teacher/path/edit/:id`  
    - 操作：创建/复制路径、搜索筛选、在编辑器里增删知识点和资源、拖拽排序、采纳/拒绝 AI 建议  
    - 结果：`learning_paths`、`path_nodes`、`path_ai_versions` 更新  
  - ~~AI 智能分组 `#/teacher/ai-groups`（搁置）~~  
    - 操作：功能暂缓，恢复后支持选择策略、生成方案、手动调整、保存/删除方案、导出  
    - 结果：`group_plans` 保存最新方案（恢复时沿用）  
  - 班级路径概览 & 学生详情 `#/teacher/class`, `#/teacher/student/:id`  
    - 操作：查询进度、添加老师备注、布置提醒、删除备注  
    - 结果：`class_progress`, `teacher_notes` 写入  
  - 知识点评测配置 `#/teacher/assessment`  
    - 操作：创建配置、AI 出题、编辑题干与答案、删除题目或整套配置、按知识点/难度查询  
    - 结果：`assessment_configs`, `assessment_questions` 完整可用

- **知识与 AI**（Demo 左侧“知识与AI”）  
  - 知识树 `#/knowledge/tree`  
    - 操作：导入/新增节点、编辑标签/学时、逻辑删除、查询全树  
    - 结果：`knowledge_tree` 维护完整  
  - 知识点标签 `#/knowledge/meta`  
    - 操作：新增/修改标签、难度、估时；仅管理员可删除  
    - 结果：`knowledge_points_meta` 更新，供路径/分析调用  
  - 资源绑定 `#/knowledge/resources`  
    - 操作：知识点绑定/解绑 PPT、视频、AI Agent、练习；调整顺序  
    - 结果：`knowledge_resources` 维护资源矩阵  
  - 自动学习路径 `#/ai/path`  
    - 操作：生成 AI 顺序、保存版本、查看历史、废弃某版  
    - 结果：`path_ai_versions` 存档  
  - 自动出题 `#/ai/assessment`  
    - 操作：一键生成、编辑题干/答案、删除题目、筛选题库  
    - 结果：`ai_generated_questions` -> `assessment_questions`  
  - 自动回写弱项 `#/ai/mastery`（数据在报告与画像中可见）  
    - 操作：系统写入掌握度、老师可手动修正、查询每个知识点的掌握曲线  
    - 结果：`knowledge_mastery` 驱动推荐

---

## 8. 深度任务拆解（甲方可读的“要做多少事”）

> 这一节用“业务语言”说明每条功能背后要完成的工作，方便甲方评估价值和投入。

### 8.1 学生学习闭环
1. **完整旅程**：从“目标访谈 → AI 对话 → 学习路径节点 → 练习/测评 → 学习报告”，每个步骤都生成记录并可回放。  
2. **掌握度有依据**：每道题、每次练习都打上“知识点 + 难度 + 题型 + 学习方式”标签，报告中的结论都有数据来源。  
3. **体验不中断**：学习任务支持断网恢复、跨设备同步、~~错题自动归档~~（错题本搁置，恢复后补齐）。  
4. **可视化反馈**：能力雷达、知识星云、学习轨迹、~~错题趋势~~（错题本搁置）等多种视图，学生和家长都能看懂。
5. **课程内学习闭环**：课程知识目录 → 作业上传与 AI 识别 → 资料下载/预览 → 跳转数字教师对话，所有动作绑定知识点/章节并写回掌握度。

### 8.2 教师教学闭环
1. **路径从想法到落地**：老师勾选知识点 → AI 推荐顺序 → 老师调整 → 提交审批 → 分配班级 → 学生开始学习 → 老师查看效果。  
2. **教学中控台**：实时看到每个班当前节点完成度、风险名单、~~AI 分组建议~~（搁置）、待批作业，必要时可插入临时任务。  
3. **题库与评测**：AI 负责出题（带参考答案和难度），老师负责审核和调整；学生做完自动回写错题、成绩、掌握度。  
4. **班级沟通**：老师能在平台上对单个学生或整班发提醒、批注、补救建议，形成闭环。
5. **学生/班级主数据**：学生与班级建档、导入导出、成员管理与权限映射，贯穿路径、评价、分组、作业、资料分发的全链路。

### 8.3 AI 与知识资产
1. **数字教师可追责**：统一语气与人格，每条建议都附“我基于你在 XX 节的 XX 表现判断……”，可回溯对话和结论。  
2. **知识树有人养**：提供导入工具、可视化编辑、自动健康检查（失效资源/重复节点），方便甲方内容团队自行维护。  
3. **自动化不“黑箱”**：AI 生成的路径、题目、建议都有版本和审核状态，老师知道哪些是 AI 自动发出的、哪些是人工确认的。  
4. **风险控制**：AI 输出经过敏感词过滤、提示词注入测试、质量抽检，避免出现不当内容。
5. **知识库 AutoIndex**：监控源目录/对象存储，自动切片 + 去重 + 向量化；支持增量回写、手动重跑、失败重试、版本冻结，便于 Tony 运维与追踪。
6. **记忆与上下文工程**：对话+掌握度+练习/评测结果形成“学生状态快照”，支持跨设备恢复、上下文裁剪与回放，并在召回资源/题目/路径时联动向量检索。
7. **智能体运营闭环**：教师端可创建/上下架智能体、查看使用/评分/评论趋势、批量审核评论、导出大盘 Excel、导入单体学生使用明细，学生端可搜索/对话/评分，数据沉淀在 `agent_profiles` + `agent_statistics` + `agent_comments` + `agent_usage_import_jobs` 形成可运营的数字老师生态。

### 8.4 落地方式
1. **共创样板**：先和甲方挑一个班（或年级）做样板，确认学习路径和报告模板。  
2. **导入阶段**：协助甲方整理课程、资源、知识点，并提供模板/工具。  
3. **试点 → 回收 → 优化**：跑 1-2 个循环，收集老师和学生反馈，调整功能与内容。  
4. **推广阶段**: 教师培训 + 家长沟通 + 运维监控 + 数据服务，确保规模化运行。  
5. **扩展空间**：后续可接入甲方的教务系统、考试系统、家校沟通平台等。

---

## 9. 功能-数据-验收矩阵

| 主功能 | 页面/入口 | 关键操作 | 数据落点 | 验收指标 |
| --- | --- | --- | --- | --- |
| 学生目标设定 | `#/student/goal-setting` | 录入/修改/清空目标 | `student_goal` | 目标提交后 2 秒内回显；刷新后保留 |
| 思维步骤评估 | `#/student/ability-steps` | 新增/排序/删除步骤 | `thinking_steps` | 同一题可存 ≥10 条步骤，顺序一致 |
| 学习路径执行 | `#/student/path` | 标记完成、反馈难度 | `student_path_progress` | 节点完成度实时同步教师端 |
| AI 学习对话 | `#/student/dialogue/:id` | 提问、练习、测评 | `dialogue_messages`, `practice_records` | 历史消息可追溯 30 天，练习得分写入报告 |
| 互动评估 / 学习风格识别 | `/goal-selection` | 数字老师访谈、完成视频/小游戏/测验卡片、选择难度 | `assessment_sessions`, `assessment_widgets`, `learning_style_profile`, `dialogue_messages` | 访谈流程不掉线，互动卡片完成后可跳转 Dashboard/路径，评估结果可回看 |
| AI 学习助手 | `/student/agents`, `/student/agent/:id` | 搜索/筛选智能体、发起对话、评分/评论/点赞 | `agent_profiles`, `agent_usage_records`, `agent_ratings`, `agent_comments`, `agent_statistics` | 搜索响应 < 1 秒；评分防重复；使用记录实时+1；留言按时间排序 |
| 学习报告 | `#/student/report` | 生成/导出/自评 | `learning_reports` | 报告渲染时间 < 3 秒，导出可打开 |
| 课程知识目录 | `/course/:courseId/knowledge-catalog` | 按章节/掌握度筛选、跳转学习对话 | `knowledge_catalog_bindings`, `knowledge_mastery` | 切换章节/过滤响应 < 1 秒；点击知识点直达对应对话 |
| 课程作业上传与识别 | `/course/:courseId/homework` | 上传单题/整卷、AI 识别、提交 | `homework_submissions`, `ocr_results` | 整卷识别 < 60 秒，分题准确率≥90%，提交成功回执 |
| 课程资料库 | `/course/:courseId/materials` | 按知识点/类型搜索、预览/下载 | `teacher_resources`, `knowledge_resource_bindings` | 资料列表加载 < 2 秒，下载/预览可用，关联标签可点击筛选 |
| 教师路径管理 | `#/teacher/path` | 新建/复制/删除路径 | `learning_paths`, `path_nodes` | 路径创建 1 分钟内完成，可回看历史 |
| 智能体运营中心 | `/teacher/agents`, `/teacher/agents/manage`, `/teacher/agent/:id` | 创建/编辑/下架智能体；查看统计与评论；删除/批量审核留言；导出大盘 Excel；导入单个智能体的学生使用明细（Excel） | `agent_profiles`, `agent_statistics`, `agent_comments`, `agent_usage_records`, `agent_templates`, `agent_usage_import_jobs` | 统计卡片加载 < 2 秒；上下架/编辑后列表即时刷新；评论批量审核 100% 生效；大盘导出 < 5 秒；使用明细导入校验通过后 5 秒内入库 |
| ~~AI 分组（搁置）~~ | `#/teacher/ai-groups` | 暂缓：生成/调整/保存方案 | `group_plans` | 暂不验收；恢复后对齐既定指标 |
| 章节树 + 知识点 | `#/knowledge/tree` | 搜索/勾选/联动 | `knowledge_tree`, `knowledge_mastery` | 大树加载 < 1 秒；章节选择自动打钩 |
| ~~模板库（搁置）~~ | `#/teacher/templates`（规划中） | 暂缓：保存/应用/分享 | `lesson_plan_templates`/云端 | 恢复后补齐模板保存/套用 |
| 知识库 AutoIndex | 后台运维入口 + 定时任务 | 监控源目录、切片、向量化、增量重跑 | `kb_autoindex_tasks`, `kb_index_snapshots` + 向量库 | 新增资源 5 分钟内入库；失败自动重试≤3次并告警 |
| 自动出题 | `#/ai/assessment` | 生成/编辑/删除题目 | `ai_generated_questions`, `assessment_questions` | 生成 10 题耗时 < 60 秒，题型可控 |
| ~~AI 教案创建/编辑（搁置）~~ | `/teacher/lesson-plans` 及子路由 | 暂缓：四种创建方式、在线编辑、导出 Word/PPT | `lessonPlanStorage`, `lesson_plan_config`, `documentExporter` | 暂不验收；恢复后满足生成耗时 ≤120 秒等指标 |
| ~~模板管理与分享（搁置）~~ | `/teacher/templates` | 暂缓：保存/分类/分享模板 | `templateManager`, 云端模板库 | 恢复后验证参数 100% 复现 |
| 教师资源库 | `/teacher/resources` | 上传/管理文件、题目；链接（H5 支持搁置） | `teacher_resources`（待接入） | 上传 50MB 内文件 <10 秒，预览无报错 |
| 教学预览模式 | `/teacher/teaching-preview` | 全屏授课、AI 推荐资源、生成 PPT 大纲 | 临时状态 + `documentExporter` | 切页无白屏，AI 推荐加载 <2 秒 |
| 学生评价系统 | `/teacher/student-evaluation` | 记录表现、加分/减分 | `studentEvaluationData` | 提交后统计实时更新，撤销成功率 100% |
| 学生评价历史 | `/teacher/student-evaluation/:id` | 查看/导出个人评价轨迹 | 同上 | 支持导出 PDF/CSV，历史记录保留 ≥1 年 |
| 学生管理 | `/teacher/students` | 导入/新增/编辑/删除学生 | `students`, `enrollments` | 批量导入 1000 条 < 30 秒，学号/手机号唯一校验 |
| 班级管理 | `/teacher/classes` | 创建/编辑/删除班级、配置成员 | `classes`, `class_members`, `class_profiles` | 班级列表分页<1秒，成员调整实时生效 |
| 数字教师记忆与上下文 | 学习对话/路径/资源召回链路 | 会话持久化、上下文裁剪、跨设备恢复 | `dialogue_messages`, `context_store`, 向量索引 | 切换设备后 5 秒内恢复上下文，向量召回延迟 < 1 秒 |

> 甲方可根据“验收指标”逐项检查，确认功能是否达到交付目标。

---

## 10. 工时拆分（前后端 + AI + 测试）

| 模块 | 范围说明 | 前端 (人日) | 后端/数据 (人日) | AI/算法 (人日) | 测试/验收 (人日) | 小计 |
| --- | --- | --- | --- | --- | --- | --- |
| A. 学生评估与画像 | 目标设定、思维步骤、画像面板 | 12 | 25 | 6 | 4 | **47** |
| B. 学习路径 & 报告 | 个性化路径、学习轨迹、报告导出、~~错题本（搁置）~~ | 14 | 30 | 6 | 4 | **54** |
| C. AI 学习对话 & 自动回写 | 对话界面、练习/测评卡片、掌握度回写 | 12 | 32 | 10 | 4 | **58** |
| D. 教师工作台 & 路径管理 | Dashboard、路径列表/编辑、审批流 | 10 | 34 | 4 | 3 | **51** |
| ~~E. AI 分组 & 班级洞察（搁置）~~ | 智能分组、班级概览、导出 | 8 | 24 | 6 | 3 | **41** |
| F. 知识库 / 章节 / 资源绑定 | 知识树、章节映射、资源绑定器 | 9 | 28 | 4 | 3 | **44** |
| ~~G. AI 教案创建 + 模板系统（搁置）~~ | 创建向导、在线编辑、模板库、导出 Word/PPT | 18 | 50 | 9 | 4 | **81** |
| H. 教师资源库 & 教学预览 | 资源上传/管理、教学预览模式（课中资料推荐、资料 H5 链接支持搁置） | 12 | 26 | 4 | 3 | **45** |
| I. 学生评价系统 | 评价记录、统计、历史页面 | 5 | 15 | 2 | 1 | **23** |
| J. 自动出题 & 评测联动 | AI 出题、题库管理、评测回写 | 6 | 24 | 7 | 3 | **40** |
| K. 数据治理与集成 | 章节/知识点导入、外部接口、数据校验 | 4 | 22 | 4 | 4 | **34** |
| L. 用户数据同步与生命周期 | 学生/教师账号、历史数据导入、跨系统同步、权限映射 | 8 | 20 | 3 | 4 | **35** |
| M. 知识库 AutoIndex（负责人：Tony） | 源监听、切片/向量化、增量重跑、回调、监控与告警 | 2 | 18 | 0 | 0 | **20** |
| N. 课程知识目录/作业/资料（学生端） | 章节/知识点目录、作业上传识别、资料库筛选与下载 | 9 | 12 | 4 | 3 | **28** |
| O. 学生/班级管理（教师端） | 学生 CRUD、班级建档/成员管理、导入导出 | 6 | 10 | 0 | 2 | **18** |
| P. 记忆与上下文服务 | 对话/掌握度/练习/评测状态存储、裁剪、跨设备恢复、召回链路 | 2 | 12 | 6 | 2 | **22** |
| Q. 智能体运营 & 互动评估 | 学习风格互动评估、学生 AI 学习助手、教师智能体管理/统计/评论 | 14 | 41 | 8 | 4 | **67** |
| 搁置扣减（已从合计扣除） | ~~AI 教案、点石规划、课中资料推荐、AI 分组、错题本、资料 H5~~ | -38 | -103 | -22 | -14 | **-177** |
| **合计（扣除搁置）** |  | **113** | **320** | **61** | **37** | **531** |

> 说明：  
> - “AI/算法”包括提示词设计、NLP 解析、知识点推荐、生成质量评估等。  
> - “测试/运维”涵盖 E2E、性能、灰度、数据校验及上线操作。  
> - AutoIndex 20 人日已单列（后端 18 人日由 Tony 承担，前端 2 人日用于运维查看），计入合计 531 人日。  
> - 搁置项（AI 教案、点石规划、课中资料推荐、AI 分组、错题本、资料 H5）工时已从合计扣除 177 人日；恢复时请按扣减行加回。  
> - 表格中的人日为“功能完成”所需净开发时间，不含甲方评审时间；若接入外部系统需另行评估。
